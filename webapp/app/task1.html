<html>
	<head>
	<link rel="stylesheet" href="https://bootswatch.com/4/flatly/bootstrap.css">
	<link rel="stylesheet" href="./styles/ma.css">
	</head>
	<body>
		<!--<h1>Hi</h1>
		<input type="button" value="Click to get values" id="click" onclick="getJSON" >-->
		<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <a class="navbar-brand" href="#">Navbar</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation" style="">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarColor01">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Features</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Pricing</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">About</a>
      </li>
    </ul>

      <input class="form-control mr-sm-2" type="text" placeholder="Search">
      <button class="btn btn-secondary my-2 my-sm-0" type="submit" onclick="fun()">Search</button>
    
	
	</div>
	
  </div>
 
</nav>
<br/>
 <div class ="container">
		<div id="cc">
		
		</div>
	</div>
		<script type="text/javascript">
	var jsonResponse;
	var jsonSecond;
	function getJSON(){
			return new Promise(function (resolve,reject){
			var req = new XMLHttpRequest();
			req.overrideMimeType("application/json");
			req.open('GET', 'https://jsonplaceholder.typicode.com/photos', true);
			req.onload  = function() {
			 jsonResponse = JSON.parse(req.responseText);
				// do something with jsonResponse
				//console.log( jsonResponse);
				
			
			var str="";
			
			var x="";
			for(var i=0;i<49;i++){
				if(i%3==0)
					var l=jsonResponse[i].title+" "+jsonResponse[i].url+" "+jsonResponse[i].thumbnailUrl+"ABMNKJBHsjjasgduygduywgdywgydgwudguwygwuygduygyguyguyguygdwdghwvdgwfcdgfwcgdfwcgdfcwgfdcwgfccgcwgcfccwgfscwf";
				else if(i%3==1)
					var l=jsonResponse[i].title+" "+jsonResponse[i].url+" "+jsonResponse[i].thumbnailUrl+"122322324354768776576654654434353543323243243243243243243243243243243243243243242324324332232322222222222222222222222222222222222223222222222222222222222223252666666666";
				else
					var l=jsonResponse[i].title+" "+jsonResponse[i].url+" "+jsonResponse[i].thumbnailUrl;
					
				x=x+'<div id="card" class="card text-white bg-primary mb-3z\" onclick=\'setsession('+i+')\'   style="max-width: 20rem;"><div class="card-header" onclick='+'\" alert(\'card header handled\') \">Header</div><div class="'+i+'"><h4 class="card-title" onclick' + '=\" alert(\'card title handled\')\">Primary card title</h4><p class="card-text" onclick'+'= \" alert(\' card-text\') \">Some quick example text to build on the card title and make up the bulk of the card\'s content.</p><image src="'+ jsonResponse[i].url +" \" width=318px height=230px' onclick= \"\"/> </div><div class=\"card-body\"><a href=\"./redirected.html\">Card link</a></div><div>"+l+"</div></div>"
				
				str = str+ "<div class='"+ i +" ' ><image src='" + jsonResponse[i].thumbnailurl +" height=180px width=350px'/> </div>";
				}
			console.log(x);
			document.getElementById("cc").innerHTML=x;
			
			//document.getElementById("cc").innerHTML = str;
			};
			req.send(null);
			
			
			
			resolve("done 1st");
		});
	}
	
	function secondApi()
	{
		return new Promise(function(resolve, reject){
		
				var req = new XMLHttpRequest();
			req.overrideMimeType("application/json");
			req.open('GET', 'https://jsonplaceholder.typicode.com/comments', true);
			console.log("before entered in second");
			req.onload  = function() 
			{
			console.log("entered in second");
			 jsonSecond = JSON.parse(req.responseText);
				// do something with jsonResponse
				console.log("json second",jsonSecond);
			
			var x=sessionStorage.getItem("title");
			console.log(x);
			var str="<div><h3>"+x+"</h1></div>";
			
			
			
			}
			req.send(null);
			resolve("hi from secondApi");
			
		});
	}
	
	function fun(){
		
			getJSON().then (function(resultFrom1){
			console.log(resultFrom1);
			return secondApi();
			}).then(function(resultFrom2){
			console.log("middle");
				console.log(resultFrom2);
				});
				
				

			}
	function setsession(i)
			{
				sessionStorage.setItem("url", jsonResponse[i].url);
				sessionStorage.setItem("title",jsonResponse[i].title);
				console.log(i);
				sessionStorage.setItem("sr", i);
				temp=jsonSecond[i].body;
				//console.log(temp);
				sessionStorage.setItem("comments", temp);
				console.log(sessionStorage.getItem("comments"));
			}
			
		</script>
	</body>
</html>
